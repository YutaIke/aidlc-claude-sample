# backend ユニット機能設計計画

## 計画概要

backend ユニットのビジネスロジック詳細を設計します。アプリケーション設計で定義したコンポーネント・メソッドに対して、具体的なビジネスルールとアルゴリズムを定義します。

---

## 設計ステップ

### Part 1: 認証・ユーザー管理
- [x] Step 1: 認証ビジネスルールの定義
- [x] Step 2: ユーザー管理ビジネスルールの定義

### Part 2: アイデア管理
- [x] Step 3: アイデア作成・更新ビジネスルールの定義
- [x] Step 4: 下書き・提出状態遷移ルールの定義
- [x] Step 5: 画像管理ビジネスルールの定義

### Part 3: 評価システム
- [x] Step 6: 評価登録ビジネスルールの定義
- [x] Step 7: スコア計算アルゴリズムの定義

### Part 4: ダッシュボード・表彰
- [x] Step 8: リーダーボード計算ロジックの定義
- [x] Step 9: 表彰ビジネスルールの定義

### Part 5: 成果物生成
- [x] Step 10: business-logic-model.md の生成
- [x] Step 11: business-rules.md の生成
- [x] Step 12: domain-entities.md の生成
- [x] Step 13: 整合性検証

---

## 機能設計質問

### Q1: パスワードポリシー

ユーザーパスワードのポリシーを選択してください。

A) シンプル（最低6文字、制限なし）
B) 標準（最低8文字、英数字必須）
C) Other (please describe after [Answer]: tag below)

[Answer]: A（シンプル：最低6文字、制限なし）

---

### Q2: 評価の最小パネルメンバー数

最終スコアを計算するために必要な最小評価数を選択してください。

A) 1人以上（1件でもあれば計算）
B) 3人以上（最高・最低点除外のため最低3人必要）
C) Other (please describe after [Answer]: tag below)

[Answer]: B（3人以上：最高・最低点除外のため）

---

### Q3: 同点時のランキング処理

リーダーボードで同点の場合の処理方法を選択してください。

A) 同順位表示（例：1位、1位、3位）
B) 提出日時が早い方を上位
C) Other (please describe after [Answer]: tag below)

[Answer]: A（同順位表示）

---

### Q4: アイデア削除時の関連データ処理

アイデアを削除する際、関連する評価データをどう処理しますか？

A) カスケード削除（評価も一緒に削除）
B) 削除不可（評価があるアイデアは削除できない）
C) Other (please describe after [Answer]: tag below)

[Answer]: B（削除不可：評価があるアイデアは削除できない）

---

### Q5: ユーザー削除時の処理

ユーザーを削除する際、そのユーザーのデータをどう処理しますか？

A) 論理削除（削除フラグを立てる、データは保持）
B) 削除不可（アイデアや評価があるユーザーは削除できない）
C) Other (please describe after [Answer]: tag below)

[Answer]: A（論理削除：削除フラグを立てる）

---

## 回答サマリー

| 質問 | 回答 |
|------|------|
| Q1: パスワードポリシー | A) シンプル（最低6文字） |
| Q2: 最小評価数 | B) 3人以上 |
| Q3: 同点時のランキング | A) 同順位表示 |
| Q4: アイデア削除時 | B) 削除不可 |
| Q5: ユーザー削除時 | A) 論理削除 |

---

*作成日: 2026-01-17*
