# frontend UI仕様

## 概要

frontend ユニットのUI/UX仕様を定義します。

---

## 技術スタック

| 項目 | 技術 | バージョン |
|------|------|-----------|
| フレームワーク | React.js | 18.x |
| ルーティング | React Router | v6 |
| スタイリング | Tailwind CSS | 3.x |
| UIコンポーネント | Headless UI | 1.x |
| フォーム | React Hook Form | 7.x |
| HTTPクライアント | Axios | 1.x |
| アイコン | Heroicons | 2.x |

---

## レイアウト構成

### 基本レイアウト

```
+------------------------------------------------------------------+
|                          Header                                   |
|  [Logo]              [User Menu]                    [Logout]     |
+------------------------------------------------------------------+
|        |                                                          |
|        |                                                          |
| Side   |                   Main Content                          |
| bar    |                                                          |
|        |                                                          |
|        |                                                          |
|        |                                                          |
+--------+----------------------------------------------------------+
```

### レスポンシブ対応

| ブレークポイント | レイアウト |
|-----------------|-----------|
| sm (640px以上) | サイドバー折りたたみ可能 |
| md (768px以上) | サイドバー常時表示 |
| lg (1024px以上) | フルレイアウト |

---

## ページ仕様

### 1. LoginPage（ログインページ）

**URL**: `/login`
**認証**: 不要

```
+------------------------------------------+
|                                          |
|           Ideation Portal               |
|                                          |
|    +--------------------------------+    |
|    |  ユーザー名                    |    |
|    +--------------------------------+    |
|    |  パスワード                    |    |
|    +--------------------------------+    |
|    |        [ログイン]              |    |
|    +--------------------------------+    |
|                                          |
+------------------------------------------+
```

**動作仕様**:
- ログイン成功時: ダッシュボードへリダイレクト
- ログイン失敗時: エラーメッセージをフォーム下に表示
- 認証済みユーザーがアクセス時: ダッシュボードへリダイレクト

---

### 2. DashboardPage（ダッシュボード）

**URL**: `/dashboard`
**認証**: 必要（全ロール）

```
+------------------------------------------------------------------+
|  ダッシュボード                                                   |
+------------------------------------------------------------------+
|  +------------------+  +------------------+  +------------------+ |
|  | 総アイデア数     |  | 総評価数         |  | 平均スコア       | |
|  |      42          |  |      128         |  |      7.5         | |
|  +------------------+  +------------------+  +------------------+ |
+------------------------------------------------------------------+
|  リーダーボード                              [更新] [表彰]        |
+------------------------------------------------------------------+
|  順位 | タイトル              | 著者     | スコア | 表彰         |
|-------|----------------------|----------|--------|--------------|
|  1    | AIアシスタント導入   | 田中     | 8.5    | [金]         |
|  2    | ペーパーレス化       | 佐藤     | 8.2    | [銀]         |
|  3    | フレックス拡大       | 鈴木     | 7.9    | [銅]         |
+------------------------------------------------------------------+
```

**動作仕様**:
- 統計情報: 提出済みアイデア数、評価数、平均スコアを表示
- リーダーボード: 最終スコア確定のアイデアをランキング表示
- 更新ボタン: 管理者のみ表示、クリックでスコア再計算
- 表彰ボタン: 管理者のみ表示、上位3アイデアを表彰

---

### 3. IdeaListPage（アイデア一覧）

**URL**: `/ideas`
**認証**: 必要（全ロール）

```
+------------------------------------------------------------------+
|  アイデア一覧                                                     |
+------------------------------------------------------------------+
|  +-------------------+  +-------------------+  +-------------------+
|  | [画像]            |  | [画像]            |  | [画像]            |
|  | タイトル          |  | タイトル          |  | タイトル          |
|  | 著者: 田中        |  | 著者: 佐藤        |  | 著者: 鈴木        |
|  | スコア: 8.5       |  | スコア: --        |  | スコア: 7.2       |
|  +-------------------+  +-------------------+  +-------------------+
|  +-------------------+  +-------------------+  +-------------------+
|  | ...               |  | ...               |  | ...               |
+------------------------------------------------------------------+
```

**動作仕様**:
- カードグリッド形式で表示（3列）
- 提出済み（submitted）のアイデアのみ表示
- カードクリックで詳細ページへ遷移
- スコア未確定（評価3件未満）は「--」表示

---

### 4. IdeaDetailPage（アイデア詳細）

**URL**: `/ideas/:id`
**認証**: 必要（全ロール）

```
+------------------------------------------------------------------+
|  [戻る]                                                           |
+------------------------------------------------------------------+
|  タイトル: AIアシスタント導入                                     |
|  著者: 田中太郎                                                   |
|  ステータス: 提出済み                                             |
+------------------------------------------------------------------+
|  説明:                                                            |
|  社内業務にAIアシスタントを導入し、問い合わせ対応を自動化...     |
+------------------------------------------------------------------+
|  期待される効果:                                                  |
|  問い合わせ対応時間の50%削減、24時間対応の実現...                |
+------------------------------------------------------------------+
|  添付画像:                                                        |
|  [画像1] [画像2]                                                  |
+------------------------------------------------------------------+
|  評価結果:                                                        |
|  +---------------+---------------+---------------+                |
|  | 実現可能性    | インパクト    | 革新性        |                |
|  |     8.0       |     8.5       |     9.0       |                |
|  +---------------+---------------+---------------+                |
|  最終スコア: 8.5                                                  |
+------------------------------------------------------------------+
|  フィードバック:                                                  |
|  - 「実現性が高く、すぐに着手できそう」（評価者A）               |
|  - 「コスト効果が明確」（評価者B）                               |
+------------------------------------------------------------------+
```

**動作仕様**:
- 自分のアイデアの場合: 評価結果とフィードバックを表示
- 他者のアイデアの場合: 基本情報のみ表示（評価結果は非表示）
- 評価3件未満の場合: 「評価中」と表示

---

### 5. IdeaFormPage（アイデア作成・編集）

**URL**: `/ideas/new`（新規）、`/ideas/:id/edit`（編集）
**認証**: 必要（一般従業員）

```
+------------------------------------------------------------------+
|  アイデアを提出                                                   |
+------------------------------------------------------------------+
|  タイトル *                                                       |
|  +--------------------------------------------------------------+ |
|  |                                                              | |
|  +--------------------------------------------------------------+ |
|                                                                    |
|  説明 *                                                           |
|  +--------------------------------------------------------------+ |
|  |                                                              | |
|  |                                                              | |
|  +--------------------------------------------------------------+ |
|                                                                    |
|  期待される効果 *                                                 |
|  +--------------------------------------------------------------+ |
|  |                                                              | |
|  +--------------------------------------------------------------+ |
|                                                                    |
|  画像を添付（最大5枚）                                            |
|  [ファイルを選択]                                                 |
|  [画像1] [x]  [画像2] [x]                                        |
|                                                                    |
|  +------------------+  +------------------+                       |
|  | [下書き保存]     |  | [提出する]       |                       |
|  +------------------+  +------------------+                       |
+------------------------------------------------------------------+
```

**動作仕様**:
- 下書き保存: status=draft で保存、編集可能
- 提出する: status=submitted で保存、以後編集不可
- 画像: 最大5枚、JPEG/PNG/GIF、5MB以下
- バリデーション: onBlur でエラー表示

**バリデーションルール**:
| フィールド | ルール |
|-----------|--------|
| タイトル | 必須、1-100文字 |
| 説明 | 必須、1-2000文字 |
| 期待される効果 | 必須、1-1000文字 |

---

### 6. MyIdeasPage（マイアイデア）

**URL**: `/my-ideas`
**認証**: 必要（一般従業員）

```
+------------------------------------------------------------------+
|  マイアイデア                              [新規作成]             |
+------------------------------------------------------------------+
|  下書き                                                           |
|  +--------------------------------------------------------------+ |
|  | タイトル: 新サービス案          [編集] [削除]                | |
|  | 更新日: 2026-01-15                                           | |
|  +--------------------------------------------------------------+ |
+------------------------------------------------------------------+
|  提出済み                                                         |
|  +--------------------------------------------------------------+ |
|  | タイトル: AIアシスタント導入    スコア: 8.5                  | |
|  | 提出日: 2026-01-10                                           | |
|  +--------------------------------------------------------------+ |
+------------------------------------------------------------------+
```

**動作仕様**:
- 下書きと提出済みを分けて表示
- 下書き: 編集・削除ボタン表示
- 提出済み: 編集・削除不可、スコア表示

---

### 7. EvaluationPage（評価ページ）

**URL**: `/evaluations`
**認証**: 必要（パネルメンバー、管理者）

```
+------------------------------------------------------------------+
|  評価                                                             |
+------------------------------------------------------------------+
|  [未評価] [評価済み]                                              |
+------------------------------------------------------------------+
|  未評価のアイデア (5件)                                           |
|  +--------------------------------------------------------------+ |
|  | AIアシスタント導入                          [評価する]       | |
|  | 著者: 田中太郎                                               | |
|  +--------------------------------------------------------------+ |
|  | ペーパーレス化推進                          [評価する]       | |
|  | 著者: 佐藤花子                                               | |
|  +--------------------------------------------------------------+ |
+------------------------------------------------------------------+
```

**評価フォーム**（モーダル）:
```
+------------------------------------------+
|  アイデアを評価                    [x]   |
+------------------------------------------+
|  タイトル: AIアシスタント導入            |
+------------------------------------------+
|  実現可能性 (1-10) *                     |
|  [    ] [スライダー]                     |
|                                          |
|  インパクト (1-10) *                     |
|  [    ] [スライダー]                     |
|                                          |
|  革新性 (1-10) *                         |
|  [    ] [スライダー]                     |
|                                          |
|  フィードバックコメント                  |
|  +------------------------------------+  |
|  |                                    |  |
|  +------------------------------------+  |
|                                          |
|  [キャンセル]            [評価を送信]    |
+------------------------------------------+
```

**動作仕様**:
- タブ切り替え: 未評価/評価済み
- 自分のアイデアは一覧に表示されない
- スコア: スライダーまたは数値入力（1-10）
- コメント: 任意、最大1000文字

---

### 8. UserManagementPage（ユーザー管理）

**URL**: `/admin/users`
**認証**: 必要（管理者のみ）

```
+------------------------------------------------------------------+
|  ユーザー管理                              [新規作成]             |
+------------------------------------------------------------------+
|  ユーザー名  | ロール          | 作成日     | 操作               |
|-------------|-----------------|------------|-------------------|
|  tanaka     | 一般従業員      | 2026-01-01 | [編集] [削除]     |
|  sato       | パネルメンバー   | 2026-01-02 | [編集] [削除]     |
|  admin      | 管理者          | 2026-01-01 | [編集]            |
+------------------------------------------------------------------+
```

**動作仕様**:
- 論理削除されたユーザーは表示されない
- 自分自身は削除不可
- 削除時: 確認ダイアログを表示

---

### 9. PanelManagementPage（パネルメンバー管理）

**URL**: `/admin/panels`
**認証**: 必要（管理者のみ）

```
+------------------------------------------------------------------+
|  パネルメンバー管理                                               |
+------------------------------------------------------------------+
|  現在のパネルメンバー                                             |
|  +--------------------------------------------------------------+ |
|  | sato (佐藤花子)                              [解任]          | |
|  | suzuki (鈴木一郎)                            [解任]          | |
|  +--------------------------------------------------------------+ |
+------------------------------------------------------------------+
|  一般従業員（パネルメンバーに任命可能）                           |
|  +--------------------------------------------------------------+ |
|  | tanaka (田中太郎)                            [任命]          | |
|  | yamada (山田次郎)                            [任命]          | |
|  +--------------------------------------------------------------+ |
+------------------------------------------------------------------+
```

**動作仕様**:
- 任命: employee → panel_member
- 解任: panel_member → employee

---

## 共通UI要素

### トースト通知

**位置**: 画面右上
**表示時間**: 5秒（自動で消える）
**種類**:
- 成功（緑）: 保存完了、提出完了など
- エラー（赤）: API エラー、バリデーションエラーなど
- 警告（黄）: 確認が必要な操作
- 情報（青）: 一般的な通知

### ローディング

**種類**:
- ページローディング: 画面中央にスピナー
- ボタンローディング: ボタン内にスピナー、ボタン無効化
- インラインローディング: 対象エリアにスピナー

### 確認ダイアログ

```
+------------------------------------------+
|  確認                              [x]   |
+------------------------------------------+
|                                          |
|  このアイデアを削除しますか？            |
|  この操作は取り消せません。              |
|                                          |
|  [キャンセル]              [削除する]    |
+------------------------------------------+
```

---

## ルーティング一覧

| パス | ページ | 認証 | ロール |
|------|--------|------|--------|
| `/login` | LoginPage | 不要 | - |
| `/dashboard` | DashboardPage | 必要 | 全ロール |
| `/ideas` | IdeaListPage | 必要 | 全ロール |
| `/ideas/:id` | IdeaDetailPage | 必要 | 全ロール |
| `/ideas/new` | IdeaFormPage | 必要 | employee |
| `/ideas/:id/edit` | IdeaFormPage | 必要 | employee（著者のみ） |
| `/my-ideas` | MyIdeasPage | 必要 | employee |
| `/evaluations` | EvaluationPage | 必要 | panel_member, admin |
| `/admin/users` | UserManagementPage | 必要 | admin |
| `/admin/panels` | PanelManagementPage | 必要 | admin |

---

*作成日: 2026-01-18*
